<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
<comment>tutor-sql.xml</comment>

	<!-- 운영중인 / 만료된 클래스 조회하기 -->
	<entry key="selectClassesList">
		SELECT CLASS_PHOTO, CLASS_NAME, CLASS_STATUS, TO_CHAR(CLASS_CREATE_DT,'YYYY.MM.DD')
		FROM CLASS
		WHERE CLASS_STATUS = ?
		AND MEMBER_NO = ?
	</entry>
	
 	<!-- 운영중인 / 만료된 클래스 갯수 세기 -->
	<entry key="classcount">
		SELECT COUNT(*) FROM CLASS WHERE CLASS_STATUS = ?
		AND MEMBER_NO = ?
	</entry>
   
  	<!-- 클래스 판매현황 조회하기 -->
	<entry key="selectClassSellList">
		SELECT TO_CHAR(p.PAYMENT_DATE, 'YYYY.MM.DD') AS PAYMENT_DATE, m.MEMBER_NM, 
 			c.CLASS_NAME, p.PAYMENT_STATUS
		FROM TUTOR t
		JOIN CLASS c ON t.MEMBER_NO = c.MEMBER_NO
		JOIN PAID p ON c.CLASS_NO = p.CLASS_NO
		JOIN MEMBER m ON p.MEMBER_NO = m.MEMBER_NO
		WHERE t.MEMBER_NO = ?
	</entry>
	
	<!-- 정산하기 조회하기 -->
	<entry key="selectCalculateList">
		SELECT s.SETTLE_STATUS, m.MEMBER_NM, c.CLASS_NAME AS CLASS_TITLE, c.CLASS_PRICE, 
    		s.COMMISSION, TO_CHAR(s.SETTLE_DATE, 'YYYY.MM.DD')
		FROM TUTOR t
		JOIN SETTLE s ON t.MEMBER_NO = s.MEMBER_NO
		JOIN CLASS c ON t.MEMBER_NO = c.MEMBER_NO
		JOIN PAID p ON c.CLASS_NO = p.CLASS_NO
		JOIN MEMBER m ON p.MEMBER_NO = m.MEMBER_NO
		WHERE t.MEMBER_NO = 100
		AND s.SETTLE_STATUS = ? 
	</entry>
	
	<!-- 총 정산 금액 / 정산 가능 금액 조회하기 -->
	<entry key="">
		SELECT m.MEMBER_NM, c.CLASS_PRICE, 
    		s.COMMISSION
		FROM TUTOR t
		JOIN SETTLE s ON t.MEMBER_NO = s.MEMBER_NO
		JOIN CLASS c ON t.MEMBER_NO = c.MEMBER_NO
		JOIN PAID p ON c.CLASS_NO = p.CLASS_NO
		JOIN MEMBER m ON p.MEMBER_NO = m.MEMBER_NO
		WHERE t.MEMBER_NO = 100
		AND s.SETTLE_STATUS = 1;
	</entry>


</properties>
