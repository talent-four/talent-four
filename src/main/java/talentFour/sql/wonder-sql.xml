<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">

<properties>
<comment>woder-sql.xml</comment>


<!-- 자유게시판 목록 조회 -->
<entry key="selectlistFree">
SELECT * FROM (
    SELECT 
        BOARD_NO, BOARD_TITLE, BOARD_CONTENT, 
        TO_CHAR(CREATED_DT, 'YYYY-MM-DD') AS CREATED_DT,
        READ_COUNT, MEMBER_NM, QA_STATUS, WONDER_TYPE,
        LISTAGG(TAG_NAME, ', ') WITHIN GROUP (ORDER BY TAG_NAME) AS TAG_NAMES,
        ROW_NUMBER() OVER (ORDER BY BOARD_NO) AS ROW_NUM
    FROM BOARD
    JOIN WONDER_BOARD USING(BOARD_NO)
    JOIN MEMBER USING(MEMBER_NO)
    JOIN HASHTAG USING(BOARD_NO)
    WHERE WONDER_TYPE = '자유 궁금증' 
      AND BOARD_CD = '3' 
      AND BOARD_ST = '1'
    GROUP BY BOARD_NO, BOARD_TITLE, BOARD_CONTENT, TO_CHAR(CREATED_DT, 'YYYY-MM-DD'), 
             READ_COUNT, MEMBER_NM, QA_STATUS, WONDER_TYPE
)
WHERE ROW_NUM BETWEEN ? AND ?
</entry>

<entry key="boardDetail">
SELECT BOARD_NO, BOARD_TITLE, BOARD_CONTENT, CREATED_DT, MEMBER_NM,QA_STATUS FROM BOARD
JOIN MEMBER USING(MEMBER_NO)
JOIN WONDER_BOARD USING(BOARD_NO)
WHERE BOARD_CD = 3 AND BOARD_NO=?
</entry>
</properties>


