<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
<comment>member-sql.xml</comment>

	<entry key="login">
		SELECT MEMBER_NO, MEMBER_EMAIL, MEMBER_NM, MEMBER_PW, MEMBER_ST, MEMBER_PROFILE FROM MEMBER WHERE MEMBER_EMAIL=? AND MEMBER_PW=? AND SECESSION_FL='N'
	</entry>
	
	<entry key="checkId">
		SELECT COUNT(MEMBER_NM) FROM MEMBER WHERE MEMBER_NM = ?
	</entry>
	
	<entry key="updateId">
		UPDATE MEMBER SET MEMBER_NM=? WHERE MEMBER_NM=?
	</entry>
	
	<entry key="checkCurrentpw">
		SELECT COUNT(MEMBER_NO) FROM MEMBER WHERE MEMBER_PW=? AND MEMBER_NO=?
	</entry>

	<entry key="changePw">
		UPDATE MEMBER SET MEMBER_PW=? WHERE MEMBER_NO=?
	</entry>
	
	<entry key="secession">
		UPDATE MEMBER SET SECESSION_FL='Y' WHERE MEMBER_NO=?
	</entry>
	
	<entry key="selectReview">
		SELECT B.BOARD_NO, B.BOARD_TITLE, B.BOARD_CONTENT, B.CREATED_DT, B.UPDATE_DT, B.BOARD_ST, M.MEMBER_NM, R.REVIEW_STAR, R.CLASS_NO as parents , H.TAG_NAME , (SELECT COUNT(*) FROM REPORT WHERE B.BOARD_NO=BOARD_NO) AS REPORT, (SELECT COUNT(*) FROM THUMBS WHERE B.BOARD_NO=BOARD_NO) AS THUMBS, M.MEMBER_PROFILE
		FROM BOARD B
		JOIN REVIEW R ON (B.BOARD_NO=R.BOARD_NO)
		LEFT JOIN HASHTAG H ON (B.BOARD_NO=H.BOARD_NO)
		JOIN MEMBER M ON (B.MEMBER_NO=M.MEMBER_NO)
		WHERE B.MEMBER_NO=?
		AND BOARD_CD=2
		AND BOARD_ST=1
	</entry>
	
	<entry key="getDetailPageReview">
		SELECT B.BOARD_NO, B.BOARD_TITLE, B.BOARD_CONTENT, B.CREATED_DT, B.UPDATE_DT, 
		       B.BOARD_ST, M.MEMBER_NM, R.REViEW_STAR, R.CLASS_NO as parents,
		       (SELECT COUNT(*) FROM REPORT WHERE B.BOARD_NO=BOARD_NO) AS REPORT, 
		       (SELECT COUNT(*) FROM THUMBS WHERE B.BOARD_NO=BOARD_NO) AS THUMBS, 
		       M.MEMBER_PROFILE
		FROM CLASS C
		JOIN REVIEW R ON C.CLASS_NO = R.CLASS_NO
		JOIN BOARD B ON B.BOARD_NO = R.BOARD_NO
		JOIN MEMBER M ON B.MEMBER_NO = M.MEMBER_NO
		--JOIN HASHTAG H ON (B.BOARD_NO = H.BOARD_NO)
		WHERE C.CLASS_NO = ?
		AND BOARD_CD=2
	</entry>
	
	<entry key="selectPaid">
		SELECT CLASS_PHOTO, CLASS_NAME, TO_CHAR(PAYMENT_DATE, 'YY-MM-DD') , c.class_no
		FROM PAID P 
		JOIN CLASS C ON (P.CLASS_NO=C.CLASS_NO)
		WHERE P.MEMBER_NO=?
	</entry>
	
	
	<entry key="profileImage">
		UPDATE MEMBER SET MEMBER_PROFILE=? WHERE MEMBER_NO=?
	</entry>
	
	<entry key="searchMemberNo">
		SELECT MEMBER_NO FROM MEMBER WHERE MEMBER_NM=?
	</entry>
		
	<entry key="insertChatting">
		INSERT INTO CHATTING VALUES (SEQ_CHAT_NO.NEXTVAL, ? , ? , ? , SYSDATE)
	</entry>
	
	<entry key="signUp">
		INSERT INTO MEMBER VALUES (SEQ_MEMBER_NO.NEXTVAL , ?, ?, ?, SYSDATE, DEFAULT, DEFAULT , NULL)
	</entry>
</properties>
